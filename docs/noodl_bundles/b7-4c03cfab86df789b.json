[{"name":"/Logic/Unlock Fact copy","nodes":[{"id":"6f1a80ea-ee62-c9e7-0ce3-16cc5852d922","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"c15eb6e6-6974-6e25-d0b0-1a54bb6f19d7","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"aa5777e9-3f3f-0385-ab6e-e20a0f7b048e","type":"JavaScriptFunction","parameters":{"scriptOutputs":[{"id":"jvvw","label":"Done"}],"outtype-Settings":"object","functionScript":"function unlockFact(factID, userData) {\n    // Check if fact is already unlocked\n    if(userData['unlocked-facts'].find((fact) => fact.index === factID) === undefined) {\n        // Fact is newly unlocked\n        let unlockedFact = {\n            'index': factID,\n            'date-unlocked': new Date(),\n            'quiz': {\n                'shown': 0,\n                'correct': 0\n            }\n        }\n\n        userData['unlocked-facts'].push(unlockedFact);\n    }\n}\n\nif(Inputs.CanStoreData) {\n    let userData = JSON.parse(localStorage.getItem(\"userData\"));\n\n    unlockFact(Inputs.FactID, userData);\n    localStorage.setItem('userData', JSON.stringify(userData));\n    Outputs.Done();\n}\n\n\n","outtype-Done":"signal","scriptInputs":[{"id":"vy50","label":"FactID"},{"id":"xapg","label":"CanStoreData"}],"intype-DarkMode":"boolean","intype-StoreData":"boolean","intype-FactID":"number","intype-CanStoreData":"boolean"},"ports":[{"name":"outtype-Done","displayName":"Type","editorName":"Done | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"},{"value":"signal","label":"Signal"}],"allowEditOnly":true},"default":"string","parent":"scriptOutputs","parentItemId":"jvvw","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"intype-FactID","displayName":"Type","editorName":"FactID | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"vy50","index":6},{"name":"in-FactID","displayName":"FactID","plug":"input","type":"number","group":"Inputs","index":7},{"name":"intype-CanStoreData","displayName":"Type","editorName":"CanStoreData | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"xapg","index":8},{"name":"in-CanStoreData","displayName":"CanStoreData","plug":"input","type":"boolean","group":"Inputs","index":9}],"children":[]},{"id":"45628e95-ab63-fb15-a695-81028490dea8","type":"/Logic/Load Settings","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"aa5777e9-3f3f-0385-ab6e-e20a0f7b048e","sourcePort":"out-Done","targetId":"c15eb6e6-6974-6e25-d0b0-1a54bb6f19d7","targetPort":"Done"},{"sourceId":"6f1a80ea-ee62-c9e7-0ce3-16cc5852d922","sourcePort":"Fact ID","targetId":"aa5777e9-3f3f-0385-ab6e-e20a0f7b048e","targetPort":"in-FactID"},{"sourceId":"6f1a80ea-ee62-c9e7-0ce3-16cc5852d922","sourcePort":"Do","targetId":"45628e95-ab63-fb15-a695-81028490dea8","targetPort":"Do"},{"sourceId":"45628e95-ab63-fb15-a695-81028490dea8","sourcePort":"Store Data","targetId":"aa5777e9-3f3f-0385-ab6e-e20a0f7b048e","targetPort":"in-CanStoreData"},{"sourceId":"45628e95-ab63-fb15-a695-81028490dea8","sourcePort":"Done","targetId":"aa5777e9-3f3f-0385-ab6e-e20a0f7b048e","targetPort":"run"}],"ports":[{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Done","type":"signal","plug":"output","index":1},{"name":"Fact ID","type":"number","group":"Inputs","plug":"input","index":1}],"roots":[]}]